<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è§’è‰²ç³»ç»Ÿ - å‡¡äººä¿®ä»™ä¼ </title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#d4af37',
            secondary: '#b80000',
            accent: '#4dabf7',
            dark: '#0d1421'
          },
          fontFamily: {
            xianxia: ['"STKaiti"', '"KaiTi"', 'serif'],
            zhongwen: ['"STZhongsong"', '"SimSun"', 'serif']
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .xianxia-shadow {
        box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
      }
      .bg-blur {
        backdrop-filter: blur(10px);
      }
    }
  </style>
</head>
<body>
  <!-- é¡µé¢èƒŒæ™¯ -->
  <div class="fixed inset-0 z-0 overflow-hidden">
    <div id="backgroundAnimation" class="absolute inset-0 bg-dark opacity-90"></div>
  </div>

  <div class="container mx-auto px-4 py-8 relative z-10">
    <!-- å¤´éƒ¨æ ‡é¢˜ -->
    <header class="header mb-10">
      <h1 class="text-4xl font-xianxia text-primary text-center">è§’è‰²ç³»ç»Ÿ</h1>
      <p class="text-lg text-center text-gray-300 font-zhongwen">ä¿®ä»™ä¹‹è·¯ï¼Œé€†å¤©æ”¹å‘½</p>
    </header>

    <!-- å¯¼èˆªæ  -->
    <nav class="navbar mb-10">
      <a href="index.html" class="nav-item">é¦–é¡µ</a>
      <a href="character.html" class="nav-item active">è§’è‰²</a>
      <a href="quest.html" class="nav-item">ä»»åŠ¡</a>
      <a href="battle.html" class="nav-item">æˆ˜æ–—</a>
      <a href="market.html" class="nav-item">äº¤æ˜“</a>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="space-y-10">
      <!-- è§’è‰²åŸºæœ¬ä¿¡æ¯ -->
      <section class="bg-panel p-6 rounded-lg border-2 border-primary xianxia-shadow">
        <div class="flex flex-col md:flex-row gap-8 items-center">
          <!-- è§’è‰²å½¢è±¡ -->
          <div class="w-full md:w-1/3 flex justify-center">
            <div class="relative cultivation-border w-64 h-80 bg-dark rounded-lg flex items-center justify-center overflow-hidden">
              <div id="characterAvatar" class="w-full h-full bg-cover bg-center" style="background-image: url('assets/character-placeholder.png');"></div>
              <!-- ä¿®ä»™å¢ƒç•Œç‰¹æ•ˆ -->
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="w-40 h-40 rounded-full border-4 border-primary opacity-50 animate-pulse"></div>
              </div>
              <!-- è§’è‰²åç§° -->
              <div class="absolute bottom-4 left-0 right-0 text-center">
                <h2 class="text-2xl font-xianxia text-primary">éŸ©ç«‹</h2>
                <p class="text-lg text-accent">ç»ƒæ°”æœŸä¹å±‚</p>
              </div>
            </div>
          </div>

          <!-- è§’è‰²å±æ€§ -->
          <div class="w-full md:w-2/3">
            <h3 class="text-2xl font-xianxia text-primary mb-4 border-b border-primary pb-2">åŸºæœ¬å±æ€§</h3>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="stat-item">
                <span class="stat-name">æ”»å‡»</span>
                <span class="stat-value">250</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">é˜²å¾¡</span>
                <span class="stat-value">180</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">ç”Ÿå‘½å€¼</span>
                <span class="stat-value">1500</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">æ³•åŠ›å€¼</span>
                <span class="stat-value">1200</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">æš´å‡»ç‡</span>
                <span class="stat-value">15%</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">é—ªé¿ç‡</span>
                <span class="stat-value">10%</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">ç¥è¯†</span>
                <span class="stat-value">300</span>
              </div>
              <div class="stat-item">
                <span class="stat-name">æ ¹éª¨</span>
                <span class="stat-value">45</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ä¿®ç‚¼è¿›åº¦ -->
      <section class="bg-panel p-6 rounded-lg border-2 border-primary xianxia-shadow">
        <h3 class="text-2xl font-xianxia text-primary mb-4 border-b border-primary pb-2">ä¿®ç‚¼è¿›åº¦</h3>
        
        <div class="space-y-6">
          <!-- å¢ƒç•Œè¿›åº¦ -->
          <div>
            <div class="flex justify-between mb-2">
              <span class="text-gray-300">ç»ƒæ°”æœŸä¹å±‚ â†’ ç­‘åŸºæœŸ</span>
              <span class="text-primary">75%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 75%"></div>
            </div>
          </div>

          <!-- ä¿®ç‚¼æŒ‰é’® -->
          <div class="text-center">
            <button id="cultivateBtn" class="btn px-8 py-3 text-lg">å¼€å§‹ä¿®ç‚¼</button>
          </div>

          <!-- ä¿®ç‚¼æç¤º -->
          <div class="bg-dark/70 p-4 rounded-lg border border-accent/30">
            <h4 class="text-lg font-xianxia text-accent mb-2">ä¿®ç‚¼æç¤º</h4>
            <p class="text-gray-400">
              1. ä¿®ç‚¼éœ€è¦æ¶ˆè€—ä¸€å®šçš„çµæ°”å€¼<br>
              2. æœç”¨ä¸¹è¯å¯ä»¥åŠ å¿«ä¿®ç‚¼é€Ÿåº¦<br>
              3. å¯»æ‰¾çµè„‰ä¹‹åœ°ä¿®ç‚¼æ•ˆæœæ›´ä½³<br>
              4. çªç ´å¢ƒç•Œæ—¶å¯èƒ½é­é‡å¿ƒé­”åŠ«
            </p>
          </div>
        </div>
      </section>

      <!-- æŠ€èƒ½ä¸æ³•æœ¯ -->
      <section class="bg-panel p-6 rounded-lg border-2 border-primary xianxia-shadow">
        <h3 class="text-2xl font-xianxia text-primary mb-4 border-b border-primary pb-2">æŠ€èƒ½ä¸æ³•æœ¯</h3>
        
        <div class="space-y-6">
          <!-- æŠ€èƒ½åˆ—è¡¨ -->
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
            <div class="skill-icon">
              <span class="text-3xl">âš¡</span>
            </div>
            <div class="skill-icon">
              <span class="text-3xl">ğŸ”¥</span>
            </div>
            <div class="skill-icon">
              <span class="text-3xl">ğŸ’§</span>
            </div>
            <div class="skill-icon">
              <span class="text-3xl">ğŸŒªï¸</span>
            </div>
            <div class="skill-icon">
              <span class="text-3xl">ğŸ›¡ï¸</span>
            </div>
            <div class="skill-icon">
              <span class="text-3xl">âœ¨</span>
            </div>
          </div>

          <!-- æŠ€èƒ½è¯¦æƒ… -->
          <div id="skillDetail" class="bg-dark/70 p-4 rounded-lg border border-primary/30">
            <h4 class="text-xl font-xianxia text-primary mb-2">é›·çµæœ¯</h4>
            <p class="text-gray-400 mb-3">é‡Šæ”¾ä¸€é“é›·çµåŠ›æ”»å‡»æ•Œäººï¼Œæœ‰å‡ ç‡é€ æˆéº»ç—¹æ•ˆæœã€‚</p>
            <div class="flex justify-between text-sm">
              <span class="text-gray-300">ç­‰çº§: 3</span>
              <span class="text-gray-300">ä¼¤å®³: 180-220</span>
              <span class="text-gray-300">æ¶ˆè€—: 80æ³•åŠ›</span>
              <span class="text-gray-300">å†·å´: 5ç§’</span>
            </div>
          </div>
        </div>
      </section>

      <!-- è£…å¤‡ä¸æ³•å® -->
      <section class="bg-panel p-6 rounded-lg border-2 border-primary xianxia-shadow">
        <h3 class="text-2xl font-xianxia text-primary mb-4 border-b border-primary pb-2">è£…å¤‡ä¸æ³•å®</h3>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- è£…å¤‡æ  -->
          <div>
            <h4 class="text-xl font-xianxia text-accent mb-4">è£…å¤‡</h4>
            <div class="space-y-3">
              <div class="flex items-center p-3 bg-dark/70 rounded-lg border border-primary/30">
                <div class="w-10 h-10 mr-3 bg-primary/20 rounded flex items-center justify-center">
                  <span class="text-primary">ğŸ‘•</span>
                </div>
                <div class="flex-1">
                  <h5 class="text-gray-300">é’å†¥é“è¢</h5>
                  <p class="text-sm text-gray-400">é˜²å¾¡+45ï¼Œæ³•æŠ—+20</p>
                </div>
              </div>
              
              <div class="flex items-center p-3 bg-dark/70 rounded-lg border border-primary/30">
                <div class="w-10 h-10 mr-3 bg-primary/20 rounded flex items-center justify-center">
                  <span class="text-primary">ğŸ—¡ï¸</span>
                </div>
                <div class="flex-1">
                  <h5 class="text-gray-300">é’æœ¨å‰‘</h5>
                  <p class="text-sm text-gray-400">æ”»å‡»+65ï¼Œæš´å‡»+5%</p>
                </div>
              </div>
            </div>
          </div>

          <!-- æ³•å®æ  -->
          <div>
            <h4 class="text-xl font-xianxia text-accent mb-4">æ³•å®</h4>
            <div class="space-y-3">
              <div class="flex items-center p-3 bg-dark/70 rounded-lg border border-primary/30">
                <div class="w-10 h-10 mr-3 bg-primary/20 rounded flex items-center justify-center">
                  <span class="text-primary">ğŸ”®</span>
                </div>
                <div class="flex-1">
                  <h5 class="text-gray-300">å¾¡ç©ºé£è¡Œç¬¦</h5>
                  <p class="text-sm text-gray-400">æ¶ˆè€—çµåŠ›ï¼Œå¯åœ¨ç©ºä¸­é£è¡Œ</p>
                </div>
              </div>
              
              <div class="flex items-center p-3 bg-dark/70 rounded-lg border border-primary/30">
                <div class="w-10 h-10 mr-3 bg-primary/20 rounded flex items-center justify-center">
                  <span class="text-primary">ğŸ“œ</span>
                </div>
                <div class="flex-1">
                  <h5 class="text-gray-300">èšæ°”ä¸¹æ–¹</h5>
                  <p class="text-sm text-gray-400">å¯ç‚¼åˆ¶èšæ°”ä¸¹ï¼Œæå‡ä¿®ç‚¼é€Ÿåº¦</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- èƒŒåŒ… -->
      <section class="bg-panel p-6 rounded-lg border-2 border-primary xianxia-shadow">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-2xl font-xianxia text-primary border-b border-primary pb-2">èƒŒåŒ…</h3>
          <span class="text-gray-300">12/50 æ ¼</span>
        </div>
        
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-10 gap-3">
          <!-- èƒŒåŒ…ç‰©å“ -->
          <div class="bg-dark/70 p-3 rounded-lg border border-primary/30 aspect-square flex flex-col items-center justify-center text-center hover:border-primary transition-all">
            <span class="text-2xl mb-1">ğŸ’Š</span>
            <p class="text-xs text-gray-300">èšæ°”ä¸¹</p>
            <p class="text-xs text-primary">x5</p>
          </div>
          
          <div class="bg-dark/70 p-3 rounded-lg border border-primary/30 aspect-square flex flex-col items-center justify-center text-center hover:border-primary transition-all">
            <span class="text-2xl mb-1">ğŸ’°</span>
            <p class="text-xs text-gray-300">ä¸‹å“çµçŸ³</p>
            <p class="text-xs text-primary">x120</p>
          </div>
          
          <div class="bg-dark/70 p-3 rounded-lg border border-primary/30 aspect-square flex flex-col items-center justify-center text-center hover:border-primary transition-all">
            <span class="text-2xl mb-1">ğŸª¨</span>
            <p class="text-xs text-gray-300">ç„é“</p>
            <p class="text-xs text-primary">x8</p>
          </div>
          
          <div class="bg-dark/70 p-3 rounded-lg border border-primary/30 aspect-square flex flex-col items-center justify-center text-center hover:border-primary transition-all">
            <span class="text-2xl mb-1">ğŸ“œ</span>
            <p class="text-xs text-gray-300">ä»»åŠ¡å·è½´</p>
            <p class="text-xs text-primary">x2</p>
          </div>
          
          <!-- ç©ºèƒŒåŒ…æ ¼ -->
          <div class="bg-dark/30 p-3 rounded-lg border border-gray-700/30 aspect-square flex items-center justify-center text-gray-500">
            <span>ç©º</span>
          </div>
          
          <!-- é‡å¤ç©ºèƒŒåŒ…æ ¼ -->
          <div class="bg-dark/30 p-3 rounded-lg border border-gray-700/30 aspect-square flex items-center justify-center text-gray-500">
            <span>ç©º</span>
          </div>
          
          <div class="bg-dark/30 p-3 rounded-lg border border-gray-700/30 aspect-square flex items-center justify-center text-gray-500">
            <span>ç©º</span>
          </div>
          
          <div class="bg-dark/30 p-3 rounded-lg border border-gray-700/30 aspect-square flex items-center justify-center text-gray-500">
            <span>ç©º</span>
          </div>
        </div>
      </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="mt-16 footer">
      <p>Â© 2023 å‡¡äººä¿®ä»™ä¼ ç½‘é¡µRPGæ¸¸æˆ - ä½“éªŒçœŸå®çš„ä¿®ä»™ä¸–ç•Œ</p>
    </footer>
  </div>

  <!-- è„šæœ¬ -->
  <script src="game.js"></script>
  <script>
    // è§’è‰²ç³»ç»Ÿç›¸å…³é€»è¾‘
    document.addEventListener('DOMContentLoaded', () => {
      // å°è¯•è·å–è§’è‰²ç®¡ç†å™¨
      let characterManager;
      try {
        characterManager = window.require ? window.require('characterManager') : null;
        
        // å¦‚æœæœ‰è§’è‰²ç®¡ç†å™¨ï¼Œåˆ™æ›´æ–°è§’è‰²ä¿¡æ¯
        if (characterManager) {
          updateCharacterInfo(characterManager.getStatus());
        }
      } catch (e) {
        console.log('è§’è‰²ç³»ç»Ÿæ¨¡å—åŠ è½½ä¸­...');
      }
      
      // åˆå§‹åŒ–æŠ€èƒ½ç³»ç»Ÿ
      initSkills();
      // åˆå§‹åŒ–è£…å¤‡ç³»ç»Ÿ
      initEquipment();
      // åˆå§‹åŒ–èƒŒåŒ…ç³»ç»Ÿ
      initInventory();
      // åˆå§‹åŒ–ä¿®ç‚¼æŒ‰é’®
      initCultivationBtn();
      
      // ç›‘å¬è§’è‰²çŠ¶æ€æ›´æ–°äº‹ä»¶
      document.addEventListener('characterStatusUpdated', (e) => {
        updateCharacterInfo(e.detail);
      });
    });
    
    // æ›´æ–°è§’è‰²ä¿¡æ¯æ˜¾ç¤º
    function updateCharacterInfo(characterStatus) {
      if (!characterStatus) return;
      
      // æ›´æ–°è§’è‰²åç§°
      const charName = document.querySelector('.char-name');
      if (charName) {
        charName.textContent = characterStatus.name;
      }
      
      // æ›´æ–°å¢ƒç•Œ
      const realm = document.querySelector('.realm');
      if (realm) {
        realm.textContent = characterStatus.realm;
      }
      
      // æ›´æ–°è¡€é‡
      const healthDisplay = document.querySelector('.char-stats .text-primary:first-child');
      if (healthDisplay) {
        healthDisplay.textContent = `${characterStatus.health}/${characterStatus.maxHealth}`;
      }
      
      // æ›´æ–°æ³•åŠ›
      const manaDisplay = document.querySelector('.char-stats .text-accent:first-child');
      if (manaDisplay) {
        manaDisplay.textContent = `${characterStatus.mana}/${characterStatus.maxMana}`;
      }
      
      // æ›´æ–°è¡€æ¡å’Œæ³•åŠ›æ¡
      const healthBar = document.querySelector('.char-stats .progress-bar:first-child .progress-fill');
      const manaBar = document.querySelector('.char-stats .progress-bar:last-child .progress-fill');
      
      if (healthBar) {
        healthBar.style.width = `${(characterStatus.health / characterStatus.maxHealth) * 100}%`;
      }
      
      if (manaBar) {
        manaBar.style.width = `${(characterStatus.mana / characterStatus.maxMana) * 100}%`;
      }
    }
  </script>
</body>
</html>